import React from 'react'
import '../../reset.css'
import './square.css'
import Coin from './spinning-coin.gif'



class Square extends React.Component {
	constructor(props) {
		super(props)
		this.position = this.props.position;																															// a 2d array like [0,0] generated by the Board components render loop 
		this.handleClick = this.handleClick.bind(this)
	}

	handleClick(e) {
		this.props.handleClick(this.props.position[0],this.props.position[1])													// this passes the Game component's playMove method the value of the caller which mutates this.props.playerBoard
	}

	getObject() {
		let object = this.props.board.objectBoard[this.position[0]][this.position[1]]
		if (object) {
			return <img src={Coin} className="coin"/>
		} 
	}

getObstacle() {
		let obstacle = this.props.board.obstacleBoard[this.position[0]][this.position[1]]

		if (obstacle) {
			if (obstacle.description) {
				return <img src={obstacle.description.imgSrc} style={obstacle.description.style}/>
			}
		} 
	}
	render() {

		let content = this.props.board.playerBoard[this.position[0]][this.position[1]]


		return (
		  <div className='square' 
		  	onClick={this.handleClick} 
				onDragOver={this.allowDrop}
				onDrop={this.drop}
				style={this.style}
				id = {this.position}
			>
			{this.getObstacle()}
			{this.getObject()}
		  </div>
		)
	}
}

export default Square